(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)n=o[u],s[n]&&d.push(s[n][0]),s[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],a=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=i[0]))}return e}var a={},s={app:0},r=[];function n(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=a,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var p=l;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"07bb":function(e,t,i){},"28f3":function(e,t,i){"use strict";var a=i("8afc"),s=i.n(a);s.a},5490:function(e,t,i){"use strict";var a=i("bdf3"),s=i.n(a);s.a},"56d7":function(e,t,i){"use strict";i.r(t);var a=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[i("div",{staticClass:"bb b--gray bg-washed-yellow",attrs:{id:"top"}}),i("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[i("div",{staticClass:"br b--light-gray overflow-auto pa2-ns",class:{collapsed:!e.sidebarOpen},attrs:{id:"sidebar"}},[i("div",{staticClass:"container br bg-white b--light-gray overflow-auto pa2 bw2"},[i("FeatureInfo"),i("Filters"),i("AnimationControls"),e._m(0)],1)]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.sidebarOpen,expression:"!sidebarOpen"}],staticClass:"relative br b--gray bw2",staticStyle:{width:"20px"},attrs:{id:"sidebar-rim"},on:{click:function(t){e.sidebarOpen=!0}}}),i("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[i("Map"),i("div",{staticClass:"absolute bg-white f3 br bt bb br--right br-100 b--magenta bw1 magenta pa1 pointer grow fw8",attrs:{id:"sidebarToggle"},on:{click:function(t){e.sidebarOpen=!e.sidebarOpen}}},[e.sidebarOpen?e._e():i("span",[e._v("→")]),e.sidebarOpen?i("span",[e._v("←")]):e._e()]),i("div",{staticClass:"absolute h-100 w-100",attrs:{id:"overlay"}},[i("Legend")],1)],1)]),i("div",{staticClass:"bt b--light-gray flex-none",attrs:{id:"bottom"}})])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"credits"},[e._v("Made by "),i("a",{attrs:{href:"https://hire.stevebennett.me"}},[e._v("Steve Bennett")]),e._v(". "),i("br"),e._v(" Data comes from https://fippe.de")])}],n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],l=i("b7d4"),c=i.n(l),p=(i("5e64"),i("602d"));const u=new a["a"];var d=i("3243");function f(e){return 4===String(e).length&&(e=`${e}-01-01`),Math.floor(new Date(e)/864e5)}function m(e){const[t,i]=e.getBounds().toArray()[0].map(Math.floor),[a,s]=e.getBounds().toArray()[1].map(Math.ceil);return[t,i,a,s]}let h,g;async function v(e,t){const i=e?"alldata.json":"https://fippe-geojson.glitch.me/alldata.json";console.log("1",t);const a=await window.fetch(i).then(e=>e.json());if(console.log("2",t),g&&e)return;h=a;const s={};h.features.forEach((e,t)=>{e.id=t;const[i,a,s]=e.properties.id.split("_");e.properties.year=+i.slice(0,4),e.properties.days=f(e.properties.id.slice(0,10)),e.properties.x=+s||0,e.properties.y=+a||0,e.properties.global=/global/.test(e.properties.id)}),h.features.sort((e,t)=>e.properties.days-t.properties.days);for(const r of h.features){for(const i of r.properties.participants)s[i]||(s[i]={expeditions:0,firstExpeditionDays:r.properties.days}),s[i].expeditions++;r.properties.participantsString=r.properties.participants.join(", ").toLowerCase(),r.properties.participantsCount=r.properties.participants.length;const e=r.properties.participants.map(e=>s[e].expeditions);r.properties.experienceMax=Math.max(...e),r.properties.experienceMin=Math.min(...e),r.properties.experienceTotal=e.reduce((e,t)=>e+t,0);const t=r.properties.participants.map(e=>r.properties.days-s[e].firstExpeditionDays);r.properties.experienceDaysMax=t.length?Math.max(...t):0,r.properties.experienceDaysMin=t.length?Math.min(...t):0,r.properties.experienceDaysTotal=t.length?t.reduce((e,t)=>e+t,0):0}t.U.setData("hashes",h),u.$emit("hashes-loaded",h),window.hashes=h,console.log("3",t),$({map:t}),g=!0}function b(){const e=["interpolate-hcl",["linear"],["get","days"],f(2008),"hsl(200, 80%, 40%)",f(2016),"red",f(2021),"hsl(60,100%,40%)",f(2022),"hsl(120, 100%, 70%)"];return e}function y(){const e=["interpolate-hcl",["linear"],["get","experienceMax"],1,"hsl(200, 80%, 40%)",10,"hsl(280, 80%, 40%)",50,"red",100,"hsl(60,100%,50%)",250,"hsl(120, 100%, 70%)"];return e}function x(){const e=["interpolate-hcl",["linear"],["get","experienceDaysMax"],0,"hsl(200, 80%, 40%)",365,"hsl(280, 80%, 40%)",730,"red",1825,"hsl(60,100%,50%)",3650,"hsl(120, 100%, 70%)",7300,"hsl(120, 100%, 70%)"];return e}function w(e){return{year:b(),experienceMax:y(),experienceDaysMax:x()}[e.colorVis]}function _(e){const t=[];if("experienceMax"===e.colorVis)for(let i of[1,5,10,20,50,100,250]){const a=d["a"].parse(w(e)).evaluate({type:"Feature",properties:{experienceMax:i},geometry:null});t.push([i,a])}else if("experienceDaysMax"===e.colorVis)for(let i of[0,1,2,5,10]){const a=d["a"].parse(w(e)).evaluate({type:"Feature",properties:{experienceDaysMax:365*i},geometry:null});t.push([i,a])}else for(let i=2008;i<=2022;i++){const a=d["a"].parse(w(e)).evaluate({type:"Feature",properties:{year:i,days:f(i)},geometry:null});t.push([i,a])}return t}function C({isGlow:e,isFlash:t,filters:i}={}){const a=t?30:e?2:0,s=e=>i.scaleExpedition?["+",["*",["log2",["length",["get","participants"]]],e],a]:["+",e,a];return["interpolate",["linear"],["zoom"],1,t?5:e?0:s(1),3,t?10:s(1),5,t?15:s(2),8,s(3),10,s(4),12,s(e?16:10)]}function M({map:e,filters:t}){const i="all"===t.outcome||["==",["get","success"],"success"===t.outcome];e.U.setFilter(/hashes-/,["all",["in",(t.participants||"").replace(/ /g,"_").toLowerCase(),["get","participantsString"]],[">=",["get","participantsCount"],t.minParticipants],[">=",["get","year"],t.minYear],["<=",["get","year"],t.maxYear],i]),e.U.setCircleRadius("hashes-circles",C({filters:t}))}function O({map:e,filters:t}){const i=!0,a=!e.getLayer("hashes-circles");a&&(e.U.addGeoJSON("hashes"),v(!0,e).then(()=>$({map:e,filters:t,show:!0})),v(!1,e).then(()=>$({map:e,filters:t,show:!0}))),e.U.addCircle("hashes-glow","hashes",{circleColor:["step",["zoom"],w(t),3,["case",["get","success"],w(t),"transparent"]],circleOpacity:["feature-state","opacity"],circleBlur:.5,circleRadius:C({isGlow:!0,filters:t}),circleSortKey:["get","days"]}),e.U.addCircle("hashes-circles","hashes",{circleStrokeColor:["case",["get","success"],["case",["get","global"],"#fff","hsla(0,0%,30%,0.5)"],w(t)],circleStrokeWidth:["step",["zoom"],["case",["get","global"],0,0],1,["case",["get","global"],1,0],3,["case",["get","global"],2,["case",["get","success"],0,2]],6,["case",["get","global"],2,["case",["get","success"],.5,2]],8,["case",["get","global"],4,["case",["get","success"],1,2]]],circleColor:["step",["zoom"],w(t),3,["case",["get","success"],w(t),"transparent"]],circleRadius:C({filters:t}),circleSortKey:["get","days"],circleOpacity:["feature-state","opacity"],circleStrokeOpacity:["case",["feature-state","show"],1,0]}),e.U.addCircle("hashes-flash","hashes",{circleStrokeColor:["case",["get","success"],"hsla(0,0%,30%,0.5)",w(t)],circleColor:["step",["zoom"],w(t),4,["case",["get","success"],w(t),"transparent"]],circleRadius:C({isFlash:!0,filters:t}),circleSortKey:["get","days"],circleOpacity:["feature-state","flashOpacity"],circleStrokeOpacity:["case",["feature-state","show"],1,0],circleBlur:1.5}),e.U.addSymbol("hashes-label","hashes",{textField:["step",["zoom"],["slice",["get","id"],0,4],11,["slice",["get","id"],0,10],12,["concat",["slice",["get","id"],0,10],"\n",["get","participantsString"]]],textSize:["interpolate",["linear"],["zoom"],10,10,12,12],textOffset:[0,1.5],textColor:w(t),textHaloColor:i?"hsla(0,0%,0%,0.4)":"hsla(0,0%,100%,0.5)",textHaloWidth:1,textOpacity:["feature-state","opacity"],minzoom:9}),M({map:e,filters:t}),a&&(e.U.hoverPointer(/hashes-circles/),e.on("click","hashes-circles",e=>{console.log(e),u.$emit("select-feature",e.features[0])}),e.on("click","hashes-glow",e=>{console.log(e),u.$emit("select-feature",e.features[0])}),e.U.hoverPopup("hashes-glow",e=>`<div>${e.properties.id}</div> ${JSON.parse(e.properties.participants).join(", ")}`,{closeButton:!1})),u.$emit("colors-change",{colorVis:t.colorVis,colors:_(t)})}function $({map:e,filters:t,show:i}){for(const a of h.features)e.setFeatureState({id:a.id,source:"hashes"},{opacity:i?1:0,show:i,flashOpacity:0})}function S({map:e,filters:t,minx:i,maxx:a,miny:s,maxy:r,animationDay:n}){for(const o of h.features)if(o.properties.x>=i&&o.properties.x<=a&&o.properties.y>=s&&o.properties.y<=r||o.properties.global){const t=n-o.properties.days;if(t<0)break;t>=0&&t<=730&&(e.setFeatureState({id:o.id,source:"hashes"},{show:t>0,opacity:t<0?0:Math.max(1-t/730,.2),flashOpacity:t<0?0:Math.max(1-t/120,0)}),0)}}let F={};const D=e=>1/e===-1/0?"-0":String(e);function A(e,t){return F[e]&&F[e][t]||{expeditions:0,successes:0,failures:0}}function k(e){e.getBounds();const t=e=>(e+540)%360-180,i=e.getBounds().toArray().flat();function a(e,t){for(let i=0;i<=179;i++)for(let a=0;a<=89;a++){const r=i*e,n=a*t;s.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[[r,n],[r+e,n],[r+e,n+t],[r,n+t],[r,n]]]},properties:{x:D(i*e),y:D(a*t),...A(r,n)}})}}i[0]=t(i[0]),i[2]=t(i[2]),console.log("boundsnorm",i);const s=[];a(1,1),a(-1,1),a(1,-1),a(-1,-1);const r={type:"FeatureCollection",features:s};return console.log(r.features.length,"graticules"),r}function j(e){e.getBounds().getNorth()-e.getBounds().getSouth()<40?e.U.setData("graticules",k(e)):e.U.setData("graticules")}function P({map:e,filters:t}){const i=!e.getSource("graticules");i&&(e.U.addGeoJSON("graticules"),e.on("moveend",()=>{}),j(e)),e.U.addLine("graticules-line","graticules",{lineColor:["case",[">",["get","successes"],0],"hsla(0,0%,30%,0.15)","hsla(0,0%,30%,0.15)"],lineOpacity:["interpolate",["linear"],["zoom"],5,0,6,1],minzoom:4}),e.U.addFill("graticules-fill","graticules",{fillColor:["case",[">",["get","successes"],0],"transparent","hsla(0,0%,30%,0.2)"],fillOutlineColor:"transparent",fillOpacity:["interpolate",["linear"],["zoom"],4,0,5,1],minzoom:4})}u.$on("hashes-loaded",e=>{F={};for(const t of e.features){const e=D(t.properties.x),i=D(t.properties.y);t.properties.global||(F[e]=F[e]||{},F[e][i]=F[e][i]||{expeditions:0,successes:0,failures:0},F[e][i].expeditions++,t.properties.success?F[e][i].successes++:F[e][i].failures++)}window.graticules=F,j(window.map)});var E={data:()=>({filters:{minYear:2008,maxYear:2022,colorVis:"experienceDaysMax",participants:"",outcome:"all"},animationDay:0}),async mounted(){c.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJja3p5cHdtOGEwMm1hM2RtdzJlYXJrajhrIn0.veC37cfBaslGu1MteavjNA";const e=new c.a.Map({container:"map",center:[144.96,-37.81],zoom:7,style:"mapbox://styles/stevage/ckzoqlsr1000115qtr5pendfa/draft",hash:"center"});p["a"].init(e,c.a),window.map=e,window.map.hash="center",this.map=e,window.app.Map=this,await e.U.onLoad(),this.filters=window.Filters.filters,this.initMapContent(e),u.$on("filters-change",e=>{this.filters=e,this.updateMapStyle()}),u.$on("animation-change",e=>e?this.startAnimation():this.stopAnimation())},methods:{findPairs(e){const t={};let i=[0,null];for(const s of e.features)for(const e of s.properties.participants){t[e]||(t[e]={});for(const a of s.properties.participants)e!==a&&(t[e][a]=(t[e][a]||0)+1,t[e][a]>i[0]&&(i=[t[e][a],e,a]))}console.log("Maximum pair",i);let a="";for(const[s,r]of Object.entries(t))for(const[e,t]of Object.entries(r))t>50&&s>e&&console.log(s,e,t);console.log(a);for(const[s,r]of Object.entries(t).filter(e=>"Stevage"===e[0]))for(const[e,t]of Object.entries(r))console.log(s,e,t)},async initMapContent(e){this.updateMapStyle()},updateMapStyle(){O({map:this.map,filters:this.filters}),P({map:this.map,filters:this.filters})},startAnimation(){this.stopAnimation(),this.animationDay=f(`${this.filters.minYear}-01-01`),$({map:this.map,filters:this.filters,show:!1}),this.lastFrame=0,this.timerFunc=(e=>{if(!this.timer||this.animationDay>f(new Date))u.$emit("animation-ended"),this.stopAnimation();else{if(this.updateAnimation(),this.lastFrame){const t=e-this.lastFrame,i=Math.max(1,Math.floor(t/10));this.animationDay+=i}this.lastFrame=e,requestAnimationFrame(this.timerFunc)}}),this.timer=1,requestAnimationFrame(this.timerFunc)},stopAnimation(){this.timer,this.timer=0,$({map:this.map,filters:this.filters,show:!0})},updateAnimation(){const[e,t,i,a]=m(this.map);u.$emit("animation-cycle",{animationDay:this.animationDay}),S({map:this.map,filters:this.filters,minx:e,miny:t,maxx:i,maxy:a,animationDay:this.animationDay})}}},Y=E,U=(i("5490"),i("2877")),z=Object(U["a"])(Y,n,o,!1,null,null,null);z.options.__file="Map.vue";var N=z.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.p?i("div",[e.imageUrl?i("img",{staticClass:"image",attrs:{src:e.imageUrl}}):e._e(),i("h2",[i("a",{attrs:{href:"https://geohashing.site/geohashing/"+e.p.id,target:"_blank"}},[e._v(e._s(e.p.id))])]),e.p.success?i("div",[e._v("Successful geohash!")]):e._e(),e.p.success?e._e():i("div",[e._v("Failed geohash")]),i("h4",[e._v(" Participants")]),e._l(JSON.parse(e.p.participants),function(t){return i("div",[e._v(e._s(t))])}),i("h4",[e._v("Experience")]),i("div",[e._v("Years (most experienced): "+e._s((e.p.experienceDaysMax/365).toFixed(2)))])],2):e._e()},L=[],B={name:"FeatureInfo",data:()=>({feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}),computed:{p(){return this.feature&&this.feature.properties},imageUrl(){return this.p&&this.p.image_url}},created(){window.app.FeatureInfo=this,u.$on("select-feature",e=>this.feature=e)}},I=B,J=(i("28f3"),Object(U["a"])(I,V,L,!1,null,"412b6cd4",null));J.options.__file="FeatureInfo.vue";var T=J.exports,q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"relative h-100",attrs:{id:"Legend"}},[i("div",{staticClass:"bg-dark-gray light-gray b--gray ba shadow-1 pa2 ma2 bottom absolute bottom-2"},[i("h3",[e._v(e._s(e.title))]),e._l(e.colors.slice().reverse(),function(t){var a=t[0],s=t[1];return i("div",[i("div",{staticClass:"pill",style:{backgroundColor:s}}),e._v(e._s(a))])})],2)])},G=[],R={name:"Legend",data:()=>({colors:window.app.yearColors,colorVis:"experienceDaysMax"}),created(){window.Legend=this,u.$on("colors-change",({colorVis:e,colors:t})=>{console.log(t),this.colors=t,this.colorVis=e})},computed:{title(){return{experienceMax:"Expeditions",experienceDaysMax:"Years of geohashing",year:"Year"}[this.colorVis]}}},H=R,K=(i("8faa"),Object(U["a"])(H,q,G,!1,null,"58842f40",null));K.options.__file="Legend.vue";var W=K.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:{disabled:!e.enabled},attrs:{id:"Filters"}},[i("h3",[e._v("Filters")]),i("label",{staticClass:"mb2"},[i("div",[e._v("Participant name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.participants,expression:"filters.participants"}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"text",disabled:!e.enabled},domProps:{value:e.filters.participants},on:{input:function(t){t.target.composing||e.$set(e.filters,"participants",t.target.value)}}})]),i("label",{staticClass:"mb2"},[i("div",[e._v("Minimum participants")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.minParticipants,expression:"filters.minParticipants",modifiers:{number:!0}}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"number",min:"1",disabled:!e.enabled},domProps:{value:e.filters.minParticipants},on:{input:function(t){t.target.composing||e.$set(e.filters,"minParticipants",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),i("label",{staticClass:"mb2"},[i("div",[e._v("Minimum year")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.minYear,expression:"filters.minYear",modifiers:{number:!0}}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"number",min:"2008",max:e.filters.maxYear,disabled:!e.enabled},domProps:{value:e.filters.minYear},on:{input:function(t){t.target.composing||e.$set(e.filters,"minYear",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),i("label",[i("div",[e._v("Maximum year")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.maxYear,expression:"filters.maxYear",modifiers:{number:!0}}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"number",min:"2008",max:"2030",disabled:!e.enabled},domProps:{value:e.filters.maxYear},on:{input:function(t){t.target.composing||e.$set(e.filters,"maxYear",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),i("h5",[e._v("Outcome")]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"all",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"all")},on:{change:function(t){e.$set(e.filters,"outcome","all")}}}),e._v("All")]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"success",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"success")},on:{change:function(t){e.$set(e.filters,"outcome","success")}}}),e._v("Successes")]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"failure",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"failure")},on:{change:function(t){e.$set(e.filters,"outcome","failure")}}}),e._v("Failures")]),i("h4",{staticClass:"mb1"},[e._v("Visualisation")]),i("label",{staticClass:"mb2"},[i("span",[e._v("Color by")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.colorVis,expression:"filters.colorVis"}],attrs:{disabled:!e.enabled},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.filters,"colorVis",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"year"}},[e._v("Year")]),i("option",{attrs:{value:"experienceMax"}},[e._v("Hasher's previous expeditions")]),i("option",{attrs:{value:"experienceDaysMax"}},[e._v("Hasher's years of experience")])])]),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.scaleExpedition,expression:"filters.scaleExpedition"}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"checkbox",disabled:!e.enabled},domProps:{checked:Array.isArray(e.filters.scaleExpedition)?e._i(e.filters.scaleExpedition,null)>-1:e.filters.scaleExpedition},on:{change:function(t){var i=e.filters.scaleExpedition,a=t.target,s=!!a.checked;if(Array.isArray(i)){var r=null,n=e._i(i,r);a.checked?n<0&&e.$set(e.filters,"scaleExpedition",i.concat([r])):n>-1&&e.$set(e.filters,"scaleExpedition",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(e.filters,"scaleExpedition",s)}}}),i("span",[e._v("Scale by expedition size")])])])},Z=[],Q={name:"Filters",data:()=>({enabled:!0,filters:{participants:"",minParticipants:0,scaleExpedition:!1,minYear:2008,maxYear:2022,outcome:"all",colorVis:"year"}}),created(){window.Filters=this,u.$on("animation-change",e=>this.enabled=!e)},watch:{filters:{deep:!0,handler(){this.filters.minYear>this.filters.maxYear&&(this.filters.minYear=this.filters.maxYear),u.$emit("filters-change",this.filters)}}}},ee=Q,te=(i("6687"),Object(U["a"])(ee,X,Z,!1,null,"7d8f3c42",null));te.options.__file="Filters.vue";var ie=te.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"AnimationControls"}},[i("h3",[e._v("Animation")]),i("button",{on:{click:e.toggleAnimation}},[e._v(e._s(e.running?"Stop":"Start"))]),e.running&&e.animationDay?i("p",[e._v(e._s(new Date(864e5*e.animationDay).toISOString().slice(0,7)))]):e._e()])},se=[],re={name:"AnimationControls",data:()=>({running:!1,animationDay:""}),created(){window.AnimationControls=this,u.$on("animation-cycle",({animationDay:e})=>this.animationDay=e),u.$on("animation-ended",()=>{console.log("not running"),this.running=!1})},methods:{async toggleAnimation(){this.running=!this.running,console.log(this.running),await this.$nextTick(),u.$emit("animation-change",this.running)}}},ne=re,oe=Object(U["a"])(ne,ae,se,!1,null,"6618fe45",null);oe.options.__file="AnimationControls.vue";var le=oe.exports;window.app={},window.app.yearColors="#000 #e69f00 #56b4e9 #009e73 #f0e442 #0072b2 #d55e00 #cc79a7 #999999".split(" ");var ce={name:"app",components:{Map:N,FeatureInfo:T,Legend:W,Filters:ie,AnimationControls:le},data(){return{sidebarOpen:!0}},created(){window.app.App=this,u.$on("select-feature",()=>this.sidebarOpen=!0)},watch:{sidebarOpen(){this.$nextTick(()=>window.map.resize())}}};i("948e");var pe=ce,ue=(i("858e"),i("b0a0"),Object(U["a"])(pe,s,r,!1,null,"49a09ffc",null));ue.options.__file="App.vue";var de=ue.exports;a["a"].config.productionTip=!1,new a["a"]({render:e=>e(de)}).$mount("#app")},6687:function(e,t,i){"use strict";var a=i("f4dd"),s=i.n(a);s.a},"69a1":function(e,t,i){},"858e":function(e,t,i){"use strict";var a=i("c59c"),s=i.n(a);s.a},"8afc":function(e,t,i){},"8faa":function(e,t,i){"use strict";var a=i("69a1"),s=i.n(a);s.a},b0a0:function(e,t,i){"use strict";var a=i("07bb"),s=i.n(a);s.a},bdf3:function(e,t,i){},c59c:function(e,t,i){},f4dd:function(e,t,i){}});
//# sourceMappingURL=app.056dc268.js.map