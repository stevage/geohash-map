(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)n=o[u],i[n]&&d.push(i[n][0]),i[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={app:0},r=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var p=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"07bb":function(e,t,s){},"200b":function(e,t,s){"use strict";var a=s("c603"),i=s.n(a);i.a},"28f3":function(e,t,s){"use strict";var a=s("8afc"),i=s.n(a);i.a},"50a5":function(e,t,s){},5490:function(e,t,s){"use strict";var a=s("bdf3"),i=s.n(a);i.a},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-column vh-100 avenir",attrs:{id:"app"}},[s("div",{staticClass:"bb b--gray bg-washed-yellow",attrs:{id:"top"}}),s("div",{staticClass:"flex flex-auto",attrs:{id:"middle"}},[s("div",{staticClass:"br b--light-gray overflow-auto pa2-ns",class:{collapsed:!e.sidebarOpen},attrs:{id:"sidebar"}},[s("div",{staticClass:"container br bg-white b--light-gray overflow-auto pa2 bw2"},[e._m(0),s("FeatureInfo"),s("Filters"),s("AnimationControls"),s("HashStats")],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.sidebarOpen,expression:"!sidebarOpen"}],staticClass:"relative br b--gray bw2",staticStyle:{width:"20px"},attrs:{id:"sidebar-rim"},on:{click:function(t){e.sidebarOpen=!0}}}),s("div",{staticClass:"relative flex-auto",attrs:{id:"map-container"}},[s("Map"),s("div",{staticClass:"absolute bg-white f3 br bt bb br--right br-100 b--magenta bw1 magenta pa1 pointer grow fw8",attrs:{id:"sidebarToggle"},on:{click:function(t){e.sidebarOpen=!e.sidebarOpen}}},[e.sidebarOpen?e._e():s("span",[e._v("→")]),e.sidebarOpen?s("span",[e._v("←")]):e._e()]),s("div",{staticClass:"absolute h-100 w-100",attrs:{id:"overlay"}},[s("Legend")],1)],1)]),s("div",{staticClass:"bt b--light-gray flex-none",attrs:{id:"bottom"}})])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"credits"},[e._v("By "),s("a",{attrs:{href:"https://hire.stevebennett.me"}},[e._v("Steve Bennett")]),e._v(". Data by "),s("a",{attrs:{href:"https://fippe.de"}},[e._v("fippe")]),e._v(".")])}],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"absolute absolute--fill",attrs:{id:"map"}})},o=[],l=s("b7d4"),c=s.n(l),p=(s("5e64"),s("602d"));const u=new a["a"];var d=s("3243");function h(e){return 4===String(e).length&&(e=`${e}-01-01`),Math.floor(new Date(e)/864e5)}function f(e){const[t,s]=e.getBounds().toArray()[0].map(Math.floor),[a,i]=e.getBounds().toArray()[1].map(Math.ceil);return[t,s,a,i]}let m,g;async function v(e,t){const s=e?"alldata.json":"https://fippe-geojson.glitch.me/alldata.json",a=await window.fetch(s).then(e=>e.json());if(g&&e)return;m=a;const i={};m.features.forEach((e,t)=>{e.id=t;const[s,a,i]=e.properties.id.split("_");e.properties.year=+s.slice(0,4),e.properties.days=h(e.properties.id.slice(0,10)),e.properties.x=+i||0,e.properties.y=+a||0,e.properties.global=/global/.test(e.properties.id)}),m.features.sort((e,t)=>e.properties.days-t.properties.days);for(const r of m.features){for(const s of r.properties.participants)i[s]||(i[s]={expeditions:0,firstExpeditionDays:r.properties.days}),i[s].expeditions++;r.properties.participantsString=r.properties.participants.join(", "),r.properties.participantsStringLower=r.properties.participantsString.toLowerCase(),r.properties.participantsCount=r.properties.participants.length;const e=r.properties.participants.map(e=>i[e].expeditions);r.properties.experienceMax=e.length?Math.max(...e):0,r.properties.experienceMin=e.length?Math.min(...e):0,r.properties.experienceTotal=e.length?e.reduce((e,t)=>e+t,0):0;const t=r.properties.participants.map(e=>r.properties.days-i[e].firstExpeditionDays);r.properties.experienceDaysMax=t.length?Math.max(...t):0,r.properties.experienceDaysMin=t.length?Math.min(...t):0,r.properties.experienceDaysTotal=t.length?t.reduce((e,t)=>e+t,0):0}t.U.setData("hashes",m),u.$emit("hashes-loaded",m),window.hashes=m,O({map:t}),g=!0}function b(){const e=["interpolate-hcl",["linear"],["get","days"],h(2008),"hsl(200, 80%, 40%)",h(2016),"red",h(2021),"hsl(60,100%,40%)",h(2022),"hsl(120, 100%, 70%)"];return e}function y(){const e=["interpolate-hcl",["linear"],["get","experienceMax"],1,"hsl(200, 80%, 40%)",10,"hsl(280, 80%, 40%)",50,"red",100,"hsl(60,100%,50%)",250,"hsl(120, 100%, 70%)"];return e}function w(){const e=["interpolate-hcl",["linear"],["get","experienceDaysMax"],0,"hsl(200, 80%, 40%)",365,"hsl(280, 80%, 40%)",730,"red",1825,"hsl(60,100%,50%)",3650,"hsl(120, 100%, 70%)",7300,"hsl(120, 100%, 70%)"];return e}function x(e){return{year:b(),experienceMax:y(),experienceDaysMax:w()}[e.colorVis]}function _(e){const t=[];if("experienceMax"===e.colorVis)for(let s of[1,5,10,20,50,100,250]){const a=d["a"].parse(x(e)).evaluate({type:"Feature",properties:{experienceMax:s},geometry:null});t.push([s,a])}else if("experienceDaysMax"===e.colorVis)for(let s of[0,1,2,5,10]){const a=d["a"].parse(x(e)).evaluate({type:"Feature",properties:{experienceDaysMax:365*s},geometry:null});t.push([s,a])}else for(let s=2008;s<=2022;s++){const a=d["a"].parse(x(e)).evaluate({type:"Feature",properties:{year:s,days:h(s)},geometry:null});t.push([s,a])}return t}function S({isGlow:e,isFlash:t,filters:s}={}){const a=t?30:e?2:0,i=e=>s.scaleExpedition?["+",["*",["log2",["length",["get","participants"]]],e],a]:["+",e,a];return["interpolate",["linear"],["zoom"],1,t?5:e?0:i(1),3,t?10:i(1),5,t?15:i(2),8,i(3),10,i(4),12,i(e?16:10)]}function C({map:e,filters:t}){const s="all"===t.outcome||["==",["get","success"],"success"===t.outcome];e.U.setFilter(/hashes-/,["all",!t.participants||["in",(t.participants||"").replace(/ /g,"_").toLowerCase(),["get","participantsStringLower"]],[">=",["get","participantsCount"],t.minParticipants],[">=",["get","year"],t.minYear],["<=",["get","year"],t.maxYear],s]),e.U.setCircleRadius("hashes-circles",S({filters:t}))}function k({map:e,filters:t}){const s=!0,a=!e.getLayer("hashes-circles");a&&(e.U.addGeoJSON("hashes"),v(!0,e).then(()=>O({map:e,filters:t,show:!0})),v(!1,e).then(()=>O({map:e,filters:t,show:!0}))),e.U.addCircle("hashes-glow","hashes",{circleColor:["step",["zoom"],x(t),3,["case",["get","success"],x(t),"transparent"]],circleOpacity:["feature-state","opacity"],circleBlur:.5,circleRadius:S({isGlow:!0,filters:t}),circleSortKey:["get","days"]}),e.U.addCircle("hashes-circles","hashes",{circleStrokeColor:["case",["get","success"],["case",["get","global"],"#fff","hsla(0,0%,30%,0.5)"],x(t)],circleStrokeWidth:["step",["zoom"],["case",["get","global"],0,0],1,["case",["get","global"],1,0],3,["case",["get","global"],2,["case",["get","success"],0,2]],6,["case",["get","global"],2,["case",["get","success"],.5,2]],8,["case",["get","global"],4,["case",["get","success"],1,2]]],circleColor:["step",["zoom"],x(t),3,["case",["get","success"],x(t),"transparent"]],circleRadius:S({filters:t}),circleSortKey:["get","days"],circleOpacity:["feature-state","opacity"],circleStrokeOpacity:["case",["feature-state","show"],1,0]}),e.U.addCircle("hashes-flash","hashes",{circleStrokeColor:["case",["get","success"],"hsla(0,0%,30%,0.5)",x(t)],circleColor:["step",["zoom"],x(t),4,["case",["get","success"],x(t),"transparent"]],circleRadius:S({isFlash:!0,filters:t}),circleSortKey:["get","days"],circleOpacity:["feature-state","flashOpacity"],circleStrokeOpacity:["case",["feature-state","show"],1,0],circleBlur:1.5}),e.U.addSymbol("hashes-label","hashes",{textField:["step",["zoom"],["slice",["get","id"],0,4],11,["slice",["get","id"],0,10],12,["concat",["slice",["get","id"],0,10],"\n",["get","participantsString"]]],textSize:["interpolate",["linear"],["zoom"],10,10,12,12],textOffset:[0,1.5],textColor:x(t),textHaloColor:s?"hsla(0,0%,0%,0.4)":"hsla(0,0%,100%,0.5)",textHaloWidth:1,textOpacity:["feature-state","opacity"],minzoom:9}),C({map:e,filters:t}),a&&(e.U.hoverPointer(/hashes-circles/),e.on("click","hashes-circles",e=>{console.log(e),u.$emit("select-feature",e.features[0])}),e.on("click","hashes-glow",e=>{console.log(e),u.$emit("select-feature",e.features[0])}),e.U.hoverPopup("hashes-glow",e=>`<div>${e.properties.id}</div> ${JSON.parse(e.properties.participants).join(", ")}`,{closeButton:!1})),u.$emit("colors-change",{colorVis:t.colorVis,colors:_(t)})}function O({map:e,filters:t,show:s}){for(const a of m.features)e.setFeatureState({id:a.id,source:"hashes"},{opacity:s?1:0,show:s,flashOpacity:0})}function $({map:e,filters:t,minx:s,maxx:a,miny:i,maxy:r,animationDay:n}){for(const o of m.features)if(o.properties.x>=s&&o.properties.x<=a&&o.properties.y>=i&&o.properties.y<=r||o.properties.global){const t=n-o.properties.days;if(t<0)break;t>=0&&t<=730&&(e.setFeatureState({id:o.id,source:"hashes"},{show:t>0,opacity:t<0?0:Math.max(1-t/730,.2),flashOpacity:t<0?0:Math.max(1-t/120,0)}),0)}}function M({map:e}){const t=!e.getSource("meridians");t&&(e.U.addGeoJSON("meridians"),e.U.setData("meridians",{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[-180,0],[180,0]]}},{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[0,90],[0,-90]]}},{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[180,90],[180,-90]]}}]})),e.U.addLine("meridians-line","meridians",{lineColor:["interpolate",["linear"],["zoom"],3,"#333",7,"#777"],lineDasharray:[4,8]})}let F={};const A=e=>Object.is(e,-0)?"-0":String(e);function D(e,t){return F[e]&&F[e][t]||{expeditions:0,successes:0,failures:0}}function j(e){const t=e=>(e+540)%360-180,s=e.getBounds().toArray().flat();function a(e,t){for(let s=0;s<=179;s++)for(let a=0;a<=89;a++){const r=s*e,n=a*t;i.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[[r,n],[r+e,n],[r+e,n+t],[r,n+t],[r,n]]]},properties:{x:A(s*e),y:A(a*t),...D(r,n)}})}}s[0]=t(s[0]),s[2]=t(s[2]);const i=[];a(1,1),a(-1,1),a(1,-1),a(-1,-1);const r={type:"FeatureCollection",features:i};return console.log(r.features.length,"graticules"),r}function L(e){e.getBounds().getNorth()-e.getBounds().getSouth()<40?e.U.setData("graticules",j(e)):e.U.setData("graticules")}function P({map:e,filters:t}){const s=!e.getSource("graticules");s&&(e.U.addGeoJSON("graticules"),e.on("moveend",()=>{}),L(e)),e.U.addLine("graticules-line","graticules",{lineColor:["case",[">",["get","successes"],0],"hsla(0,0%,30%,0.15)","hsla(0,0%,30%,0.15)"],lineOpacity:["interpolate",["linear"],["zoom"],5,0,6,1],minzoom:4}),e.U.addFill("graticules-fill","graticules",{fillColor:["case",[">",["get","successes"],0],"transparent","hsla(0,0%,30%,0.2)"],fillOutlineColor:"transparent",fillOpacity:["interpolate",["linear"],["zoom"],3,0,4,1],minzoom:3})}function U(e){const t=e.features,s=1,a=[],i={};function r(e){Object.keys(i).forEach(t=>{const r=i[t];r.end+s<e&&(r.hashes.length>1&&a.push(r),delete i[t])})}function n(){let e=t[0].properties.days;for(const s of t){s.properties.days!==e&&(e=s.properties.days,r(e));for(const t of s.properties.participants){i[t]||(i[t]={start:e,participant:t,hashes:[],allSuccesses:!0});const a=i[t];a.end=e,a.hashes.push(s),a.allSuccesses=a.allSuccesses&&s.properties.success}}return r(1e9),a}return{type:"FeatureCollection",features:n().map(e=>({type:"Feature",properties:{participant:e.participant,participantLower:e.participant.toLowerCase(),start:e.start,end:e.end,hashes:e.hashes.map(e=>e.id),length:e.hashes.length,allSuccesses:e.allSuccesses},geometry:{type:"LineString",coordinates:e.hashes.map(e=>e.geometry.coordinates)}}))}}function E(){const e=["interpolate-hcl",["linear"],["get","start"],h(2008),"hsl(200, 80%, 40%)",h(2016),"red",h(2021),"hsl(60,100%,40%)",h(2022),"hsl(120, 100%, 70%)"];return e}function N({map:e,filters:t}){const s=!e.getSource("streaks");s&&e.U.addGeoJSON("streaks");const a=["all",!!t.showStreaks,[">=",["get","length"],t.minStreakLength],!t.participants||["in",(t.participants||"").replace(/ /g,"_").toLowerCase(),["get","participantLower"]],!t.onlySuccessStreaks||["get","allSuccesses"]];e.U.addLine("streaks-under","streaks",{lineColor:"#333",lineOpacity:.9,lineWidth:["interpolate",["linear"],["zoom"],5,3,10,6],filter:a}),e.U.addLine("streaks-line","streaks",{lineColor:E(),lineDasharray:[2,2],lineOpacity:.5,lineWidth:["interpolate",["linear"],["zoom"],5,1,10,3],filter:a})}u.$on("hashes-loaded",e=>{F={};for(const t of e.features){const e=A(t.properties.x),s=A(t.properties.y);t.properties.global||(F[e]=F[e]||{},F[e][s]=F[e][s]||{expeditions:0,successes:0,failures:0},F[e][s].expeditions++,t.properties.success?F[e][s].successes++:F[e][s].failures++)}window.graticules=F,L(window.map)}),u.$on("hashes-loaded",e=>{const t=U(e);window.streaks=t,window.map.U.setData("streaks",t)});var Y={data:()=>({filters:{minYear:2008,maxYear:2022,colorVis:"experienceDaysMax",participants:"",outcome:"all"},animationDay:0}),async mounted(){c.a.accessToken="pk.eyJ1Ijoic3RldmFnZSIsImEiOiJja3p5cHdtOGEwMm1hM2RtdzJlYXJrajhrIn0.veC37cfBaslGu1MteavjNA";const e=new c.a.Map({container:"map",center:[144.96,-37.81],zoom:7,style:"mapbox://styles/stevage/ckzoqlsr1000115qtr5pendfa/draft",hash:"center"});p["a"].init(e,c.a),window.map=e,window.map.hash="center",this.map=e,window.app.Map=this,await e.U.onLoad(),u.$emit("map-loaded",e),this.filters=window.Filters.filters,this.initMapContent(e),u.$on("filters-change",e=>{this.filters=e,this.updateMapStyle()}),u.$on("animation-change",e=>e?this.startAnimation():this.stopAnimation())},methods:{findPairs(e){const t={};let s=[0,null];for(const i of e.features)for(const e of i.properties.participants){t[e]||(t[e]={});for(const a of i.properties.participants)e!==a&&(t[e][a]=(t[e][a]||0)+1,t[e][a]>s[0]&&(s=[t[e][a],e,a]))}console.log("Maximum pair",s);let a="";for(const[i,r]of Object.entries(t))for(const[e,t]of Object.entries(r))t>50&&i>e&&console.log(i,e,t);console.log(a);for(const[i,r]of Object.entries(t).filter(e=>"Stevage"===e[0]))for(const[e,t]of Object.entries(r))console.log(i,e,t)},async initMapContent(e){this.updateMapStyle()},updateMapStyle(){M({map:map}),k({map:this.map,filters:this.filters}),P({map:this.map,filters:this.filters}),N({map:map,filters:this.filters})},startAnimation(){this.stopAnimation(),this.animationDay=h(`${this.filters.minYear}-01-01`),O({map:this.map,filters:this.filters,show:!1}),this.lastFrame=0,this.timerFunc=(e=>{if(!this.timer||this.animationDay>h(new Date))u.$emit("animation-ended"),this.stopAnimation();else{if(this.updateAnimation(),this.lastFrame){const t=e-this.lastFrame,s=Math.max(1,Math.floor(t/10));this.animationDay+=s}this.lastFrame=e,requestAnimationFrame(this.timerFunc)}}),this.timer=1,requestAnimationFrame(this.timerFunc)},stopAnimation(){this.timer,this.timer=0,O({map:this.map,filters:this.filters,show:!0})},updateAnimation(){const[e,t,s,a]=f(this.map);u.$emit("animation-cycle",{animationDay:this.animationDay}),$({map:this.map,filters:this.filters,minx:e,miny:t,maxx:s,maxy:a,animationDay:this.animationDay})}}},z=Y,H=(s("5490"),s("2877")),V=Object(H["a"])(z,n,o,!1,null,null,null);V.options.__file="Map.vue";var J=V.exports,B=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.p?s("div",[e.imageUrl?s("img",{staticClass:"image",attrs:{src:e.imageUrl}}):e._e(),s("h2",[s("a",{attrs:{href:"https://geohashing.site/geohashing/"+e.p.id,target:"_blank"}},[e._v(e._s(e.p.id))])]),e.p.success?s("div",[e._v("Successful geohash!")]):e._e(),e.p.success?e._e():s("div",[e._v("Failed geohash")]),s("h4",[e._v(" Participants")]),e._l(JSON.parse(e.p.participants),function(t){return s("div",[e._v(e._s(t))])}),s("h4",[e._v("Experience")]),s("div",[e._v("Years (most experienced): "+e._s((e.p.experienceDaysMax/365).toFixed(2)))])],2):e._e()},I=[],T={name:"FeatureInfo",data:()=>({feature:void 0,ignoreProps:["id","Longitude","Latitude","image_url"]}),computed:{p(){return this.feature&&this.feature.properties},imageUrl(){return this.p&&this.p.image_url}},created(){window.app.FeatureInfo=this,u.$on("select-feature",e=>this.feature=e)}},q=T,G=(s("28f3"),Object(H["a"])(q,B,I,!1,null,"412b6cd4",null));G.options.__file="FeatureInfo.vue";var R=G.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative h-100",attrs:{id:"Legend"}},[s("div",{staticClass:"bg-dark-gray light-gray b--gray ba shadow-1 pa2 mh2 bottom absolute bottom-2"},[s("h3",{staticClass:"ma0 mb1"},[e._v(e._s(e.title))]),e._l(e.colors.slice().reverse(),function(t){var a=t[0],i=t[1];return s("div",[s("div",{staticClass:"pill",style:{backgroundColor:i}}),e._v(e._s(a))])})],2)])},K=[],X={name:"Legend",data:()=>({colors:window.app.yearColors,colorVis:"experienceDaysMax"}),created(){window.Legend=this,u.$on("colors-change",({colorVis:e,colors:t})=>{console.log(t),this.colors=t,this.colorVis=e})},computed:{title(){return{experienceMax:"Expeditions",experienceDaysMax:"Years of geohashing",year:"Year"}[this.colorVis]}}},Z=X,Q=(s("200b"),Object(H["a"])(Z,W,K,!1,null,"e27d35ea",null));Q.options.__file="Legend.vue";var ee=Q.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{disabled:!e.enabled},attrs:{id:"Filters"}},[s("h3",[e._v("Filters")]),s("label",{staticClass:"mb2"},[s("div",[e._v("Participant name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.participants,expression:"filters.participants"}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"text",disabled:!e.enabled},domProps:{value:e.filters.participants},on:{input:function(t){t.target.composing||e.$set(e.filters,"participants",t.target.value)}}})]),s("label",{staticClass:"mv2 db"},[s("div",{staticClass:"dib"},[e._v("At least")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.minParticipants,expression:"filters.minParticipants",modifiers:{number:!0}}],staticClass:"mr1 w3 dib",attrs:{id:"filter-by-participants",type:"number",size:"2",min:"1",disabled:!e.enabled},domProps:{value:e.filters.minParticipants},on:{input:function(t){t.target.composing||e.$set(e.filters,"minParticipants",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}}),s("div",{staticClass:"dib"},[e._v("participants")])]),s("label",{staticClass:"mv2 dib"},[s("div",{staticClass:"dib"},[e._v("Between")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.minYear,expression:"filters.minYear",modifiers:{number:!0}}],staticClass:"w3 dib mr1 ml1",attrs:{id:"filter-by-participants",type:"number",min:"2008",max:e.filters.maxYear,disabled:!e.enabled},domProps:{value:e.filters.minYear},on:{input:function(t){t.target.composing||e.$set(e.filters,"minYear",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),s("label",{staticClass:"dib"},[s("div",{staticClass:"dib"},[e._v("and")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.maxYear,expression:"filters.maxYear",modifiers:{number:!0}}],staticClass:"dib w3 mr1 ml1",attrs:{id:"filter-by-participants",type:"number",min:"2008",max:"2030",disabled:!e.enabled},domProps:{value:e.filters.maxYear},on:{input:function(t){t.target.composing||e.$set(e.filters,"maxYear",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]),s("h5",[e._v("Outcome")]),s("label",{staticClass:"db"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"all",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"all")},on:{change:function(t){e.$set(e.filters,"outcome","all")}}}),e._v("All")]),s("label",{staticClass:"db"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"success",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"success")},on:{change:function(t){e.$set(e.filters,"outcome","success")}}}),e._v("Successes")]),s("label",{staticClass:"db"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.outcome,expression:"filters.outcome"}],staticClass:"mr1",attrs:{type:"radio",value:"failure",disabled:!e.enabled},domProps:{checked:e._q(e.filters.outcome,"failure")},on:{change:function(t){e.$set(e.filters,"outcome","failure")}}}),e._v("Failures")]),s("h4",{staticClass:"mb1"},[e._v("Visualisation")]),s("label",{staticClass:"mb2 db"},[s("span",[e._v("Color by")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.filters.colorVis,expression:"filters.colorVis"}],attrs:{disabled:!e.enabled},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.filters,"colorVis",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"year"}},[e._v("Year")]),s("option",{attrs:{value:"experienceMax"}},[e._v("Hasher's previous expeditions")]),s("option",{attrs:{value:"experienceDaysMax"}},[e._v("Hasher's years of experience")])])]),s("label",{staticClass:"db"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.scaleExpedition,expression:"filters.scaleExpedition"}],staticClass:"mr1",attrs:{id:"filter-by-participants",type:"checkbox",disabled:!e.enabled},domProps:{checked:Array.isArray(e.filters.scaleExpedition)?e._i(e.filters.scaleExpedition,null)>-1:e.filters.scaleExpedition},on:{change:function(t){var s=e.filters.scaleExpedition,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);a.checked?n<0&&e.$set(e.filters,"scaleExpedition",s.concat([r])):n>-1&&e.$set(e.filters,"scaleExpedition",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.filters,"scaleExpedition",i)}}}),s("span",[e._v("Scale by expedition size")])]),s("label",{staticClass:"db"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.filters.showStreaks,expression:"filters.showStreaks"}],staticClass:"mr1",attrs:{type:"checkbox",disabled:!e.enabled},domProps:{checked:Array.isArray(e.filters.showStreaks)?e._i(e.filters.showStreaks,null)>-1:e.filters.showStreaks},on:{change:function(t){var s=e.filters.showStreaks,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);a.checked?n<0&&e.$set(e.filters,"showStreaks",s.concat([r])):n>-1&&e.$set(e.filters,"showStreaks",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.filters,"showStreaks",i)}}}),s("span",[e._v("Show streaks")])]),e.filters.showStreaks?s("label",{staticClass:"db ml3"},[s("span",[e._v("Minimum streak length")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.minStreakLength,expression:"filters.minStreakLength",modifiers:{number:!0}}],staticClass:"w3",attrs:{type:"number",min:"2",size:"2",disabled:!e.enabled},domProps:{value:e.filters.minStreakLength},on:{input:function(t){t.target.composing||e.$set(e.filters,"minStreakLength",e._n(t.target.value))},blur:function(t){e.$forceUpdate()}}})]):e._e(),e.filters.showStreaks?s("label",{staticClass:"db ml3"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filters.onlySuccessStreaks,expression:"filters.onlySuccessStreaks",modifiers:{number:!0}}],staticClass:"mr1",attrs:{type:"checkbox",disabled:!e.enabled},domProps:{checked:Array.isArray(e.filters.onlySuccessStreaks)?e._i(e.filters.onlySuccessStreaks,null)>-1:e.filters.onlySuccessStreaks},on:{change:function(t){var s=e.filters.onlySuccessStreaks,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=e._n(null),n=e._i(s,r);a.checked?n<0&&e.$set(e.filters,"onlySuccessStreaks",s.concat([r])):n>-1&&e.$set(e.filters,"onlySuccessStreaks",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(e.filters,"onlySuccessStreaks",i)}}}),s("span",[e._v("Only show 100% success treaks")]),s("div",{staticStyle:{color:"#888","font-size":"0.8em"}},[e._v("Excludes success-streaks that have a fail before or after")])]):e._e()])},se=[],ae={name:"Filters",data:()=>({enabled:!0,filters:{participants:"",minParticipants:0,scaleExpedition:!1,minYear:2008,maxYear:2022,outcome:"all",colorVis:"year",showStreaks:!1,minStreakLength:3,onlySuccessStreaks:!0}}),created(){window.Filters=this,u.$on("animation-change",e=>this.enabled=!e)},watch:{filters:{deep:!0,handler(){this.filters.minYear>this.filters.maxYear&&(this.filters.minYear=this.filters.maxYear),u.$emit("filters-change",this.filters)}}}},ie=ae,re=(s("fc52"),Object(H["a"])(ie,te,se,!1,null,"72e836a8",null));re.options.__file="Filters.vue";var ne=re.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"AnimationControls"}},[s("h3",[e._v("Animation")]),s("button",{on:{click:e.toggleAnimation}},[e._v(e._s(e.running?"Stop":"Start"))]),e.running&&e.animationDay?s("p",[e._v(e._s(new Date(864e5*e.animationDay).toISOString().slice(0,7)))]):e._e()])},le=[],ce={name:"AnimationControls",data:()=>({running:!1,animationDay:""}),created(){window.AnimationControls=this,u.$on("animation-cycle",({animationDay:e})=>this.animationDay=e),u.$on("animation-ended",()=>{console.log("not running"),this.running=!1})},methods:{async toggleAnimation(){this.running=!this.running,console.log(this.running),await this.$nextTick(),u.$emit("animation-change",this.running)}}},pe=ce,ue=Object(H["a"])(pe,oe,le,!1,null,"6618fe45",null);ue.options.__file="AnimationControls.vue";var de=ue.exports,he=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-white",attrs:{id:"HashStats"}},[s("h3",[e._v("Stats")]),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showStats,expression:"showStats"}],staticClass:"mr2",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showStats)?e._i(e.showStats,null)>-1:e.showStats},on:{change:function(t){var s=e.showStats,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);a.checked?n<0&&(e.showStats=s.concat([r])):n>-1&&(e.showStats=s.slice(0,n).concat(s.slice(n+1)))}else e.showStats=i}}}),e._v("Show stats")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showStats&&e.hashes.length,expression:"showStats && hashes.length"}]},[s("h3",{staticClass:"mb1"},[e._v("Hashers in this area")]),s("table",[e._m(0),e._l(e.topHashers.slice(0,10),function(t){return s("tr",[s("td",[s("a",{attrs:{href:"https://geohashing.site/geohashing/User:"+t.name}},[e._v(e._s(t.name))])]),s("td",[e._v(e._s(t.success))]),s("td",[e._v(e._s(t.fail))]),s("td",[e._v(e._s(t.success+t.fail))])])})],2)])])},fe=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("th",[e._v("Name")]),s("th",[e._v("Success")]),s("th",[e._v("Fail")]),s("th",[e._v("Total")])])}],me={name:"HashStats",data:()=>({hashes:[],showStats:!1}),created(){window.HashStats=this,u.$on("map-loaded",e=>e.on("moveend",()=>this.update(e)))},methods:{update(e){this.showStats&&(this.hashes=e.queryRenderedFeatures({layers:["hashes-circles"]}))}},computed:{topHashers(){const e={};for(const s of this.hashes)for(const t of JSON.parse(s.properties.participants))e[t]=e[t]||{success:0,fail:0},e[t][s.properties.success?"success":"fail"]++;const t=Object.entries(e).map(([e,t])=>({name:e,...t})).sort((e,t)=>t.success-e.success);return t},newestHashers(){}},watch:{showStats(){this.showStats&&this.update(window.map)}}},ge=me,ve=(s("87a4"),Object(H["a"])(ge,he,fe,!1,null,"ebb3806c",null));ve.options.__file="HashStats.vue";var be=ve.exports;window.app={},window.app.yearColors="#000 #e69f00 #56b4e9 #009e73 #f0e442 #0072b2 #d55e00 #cc79a7 #999999".split(" ");var ye={name:"app",components:{Map:J,FeatureInfo:R,Legend:ee,Filters:ne,AnimationControls:de,HashStats:be},data(){return{sidebarOpen:!0}},created(){window.app.App=this,u.$on("select-feature",()=>this.sidebarOpen=!0)},watch:{sidebarOpen(){this.$nextTick(()=>window.map.resize())}}};s("948e");var we=ye,xe=(s("add8"),s("b0a0"),Object(H["a"])(we,i,r,!1,null,"7200716d",null));xe.options.__file="App.vue";var _e=xe.exports;a["a"].config.productionTip=!1,new a["a"]({render:e=>e(_e)}).$mount("#app")},"7da0":function(e,t,s){},"87a4":function(e,t,s){"use strict";var a=s("b914"),i=s.n(a);i.a},"8afc":function(e,t,s){},add8:function(e,t,s){"use strict";var a=s("7da0"),i=s.n(a);i.a},b0a0:function(e,t,s){"use strict";var a=s("07bb"),i=s.n(a);i.a},b914:function(e,t,s){},bdf3:function(e,t,s){},c603:function(e,t,s){},fc52:function(e,t,s){"use strict";var a=s("50a5"),i=s.n(a);i.a}});
//# sourceMappingURL=app.ae8c22ab.js.map